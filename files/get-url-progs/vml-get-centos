#!/bin/sh -eu

# DO NOT EDIT THIS FILE!

# This file overwrites on every vml run. To change getter, copy this file with
# other name (e.g. without "vml-" prefix) and then change `get-url-prog` for
# apropriate item. Do not forget to update `change` section to keep
# `get-url-prog` from updating.

name="$1"; shift
if [ "$name" = centos-stream ] || [ "$name" = centos ] ; then
    name=centos-9-stream
fi
arch="$(uname -m)"
version="${name##centos-}"
url="https://cloud.centos.org/centos/$version/$arch/images/"
name="$(curl "$url" | sed -n -E 's/.*href="(.*GenericCloud.*\.qcow2)".*/\1/p' | sort -rV | head -1)"
echo "$url$name"
